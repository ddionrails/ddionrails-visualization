<!DOCTYPE html>
<html>
    <head>
        <title>Density</title>
		
		<!-- D3.js -->
		<script src='http://d3js.org/d3.v2.js'></script>   
		
		<script src='./testdata/age.json'></script>	
		<link rel='stylesheet' href='./style.css' />
                
    </head>
	
    <body>
	
		<div id='menu'></div>
		<div id='chart'></div>
		
		<script>
		
		const x = true;
	
		if(x == true){
			dataType = 'weighted'
		}
		else{
			dataType = 'density'
		}


		const margin = {top: 30, right: 100, bottom: 30, left: 50};
		
		const w =600;
		const h = 300;
		const padding = 100;
		const data = rawData.uni[dataType];
		
		const svg = d3.select('#chart')
						.append('svg')
						.attr('width', w)
						.attr('height', h)
						.attr('class', 'chart');
		
		/**		
		const data = d3.json('./testdata/age.json', function(error, json) {
			if (error) return console.warn(error);
				data = json; **/
	

		const xScale = 	d3.scale.ordinal()
						.domain(d3.range(rawData.uni.min, rawData.uni.max + 1, rawData.uni.by))
						.rangeRoundBands([0, w - padding], 0, 0.5);
						
		const yScale = d3.scale.linear()
						.domain([0, d3.max(rawData.uni.density)])
						.range([h - padding, 0]);
		
		
		const xAxis = d3.svg.axis()
			.scale(xScale)
			.orient('bottom');

		const yAxis = d3.svg.axis()
			.scale(yScale)
			.orient('left');	
	
		const xAxisLabel = svg.append('text')
							.attr('transform', 'translate(' + (w+padding)/2 + ',' + (h-margin.bottom) + ')')
							.attr('class', 'labels')
							.attr('text-anchor', 'middle')
							.text(rawData.label);
		
		svg.append('g')
			.call(xAxis)
			.attr('class', 'axis')
			.attr('transform', 'translate(' + padding + ',' + (h-padding + margin.top) + ')');				
	
		svg.append('g')
			.call(yAxis)
			.attr('class', 'axis')
			.attr('transform', 'translate(' + padding + ',' + margin.top + ')');	
		
		const path = d3.svg.line()
					 .x(function(d) {return xScale(d)})
					 .y(function (d) {return yScale(d)})
					 .interpolate('cardinal');
					 
		svg.append('path')
			.attr('class', 'line')
			.attr('d', path(data))
			.attr('transform', 'translate(' + padding + ',' + margin.top + ')');	
		
		
		const points = svg.append('g')
						.attr('transform', 'translate(' + padding + ',' + margin.top + ')'); 
		
		points.selectAll('circle')
					.data(data)
					.enter()
					.append('circle')
					.attr('cx', function(d) { return xScale(d); })
					.attr('cy', function(d) { return yScale(d); })
					.attr('r', 3)
					.style('fill', 'steelblue');

					
		const labels = svg.append('g')
						.attr('class', 'labels')
						.attr('transform', 'translate(' + padding + ',' + margin.top + ')');

		labels.selectAll('text')
				.data(data)
				.enter()
				.append('text')
				.attr('x', function(d) { return xScale(d); })
				.attr('y', function(d) { return yScale(d); })
				.attr('dy', -10)
				.attr('text-anchor', 'middle')
				.text(function(d) { return d; });
				
		
						
		
		//});
		</script>
	</body>
</html>