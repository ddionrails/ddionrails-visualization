<!DOCTYPE html>
<html>
    <head>
        <title>Visualization</title>
		
		<!-- D3.js -->
		<script src="http://d3js.org/d3.v2.js"></script>   
		
		<script src="./cat_uni.js"></script>	
		<script src="./cat_bi_sex.js"></script>	
		<script src="./cat_bi_perc.js"></script>	
		<link rel="stylesheet" href="./style.css" />
                
    </head>
	
    <body>
	
		<label><input type="checkbox" id="hideMissings"> HideMissings</label>

		<div id="menu"></div>
		<div id="chart"></div>
		
		
    
		<script>
		 
			var w =600;
			var h = 100;

			var margin_left = 70;
			var margin_right = 20;
			var margin_top = 10;
			var margin_bottom = 10;
			
			var barHeight = 10;
			//var barWidth = (w - margin_left - margin_right)/4;
			var barWidth = 40;
			
			topMenu = ["frequencies","age", "sex", "sample", "wave", "percentage", "blah"];
			sideMenu = ["absolute", "percentages", "missings", "weights"]
			
			var hideMissings = false;
			
			var svg = d3.select("#menu")
						.append("svg")
						.attr("width", w)
						.attr("height", h);
						
			var xScale = d3.scale.ordinal()
						.domain(topMenu)
						.rangeBands([0, w - margin_left - margin_right]);
						
			var yScale = d3.scale.ordinal()
							.domain(sideMenu)
							.rangeBands([(h-margin_top - margin_bottom - barHeight), 0]);
							
							
			
			/**
			var sideMenu = svg.selectAll("g")
							.data(sideMenu)
							.enter()
							.append("g")
							.attr("transform", "translate(0," + margin_top + ")");	

			sideMenu.append("rect")
					.attr("x", w-margin_right - barWidth)
					.attr("y", function(d, i){return yScale(i)})
					.attr("height", barHeight)
					.attr("width", barWidth)
					.attr("fill", "none")
					.attr("class", "button")

			
			sideMenu.append("text")
					.attr("x", w-margin_right-barWidth)
					.attr("y", function(d, i){return yScale(i)+ barHeight/2})
					.text(function(d){ return d})
					.attr("text-anchor", "center")
					.attr("font-weight", "bold")
					.attr("fill", "grey")
					.on("click", function() {console.log(d3.select(this))});
			**/		
			
			var topMenu = svg.selectAll("g")
							.data(topMenu)
							.enter()
							.append("g")
							.attr("transform", "translate(" + margin_left + "," + margin_top+")");			
			
			topMenu.append("rect")
					.attr("x", function(d, i){return xScale(i)})
					.attr("y", 10)
					.attr("height", barHeight)
					.attr("width", barWidth)
					.attr("fill", "none")
					.attr("class", "button");
					

			modes = {
			
				frequencies:	cat_uni,
				sex:			cat_bi_sex,
				percentage: 	cat_bi_perc,
			
			}
			
			
			var current;
			topMenu.append("text")
					.attr("x", function(d, i){return xScale(i) + barWidth/2})
					.attr("y", margin_top + barHeight*(2/3))
					.text(function(d){ return d})
					.attr("text-anchor", "center")
					.attr("font-weight", "bold")
					.attr("fill", "grey")
					.attr("font-family", "sans-serif")
					.attr("font-size", "12px")
					.on("click", function(d){
							current = d;
							mode[current]();
					});
					
				d3.select("#hideMissings")
					.on("change", function(){
						if(this.checked){
							hideMissings = true;
							currentMode[mode]();
						}
						else{
							hideMissings = false;
							mode[current]();
						}
					});	
			
			cat_uni();

			
			
							
			
							
						
			
						
		</script>
		</body>
</html>